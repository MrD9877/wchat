import { socket } from "@/socket";
import React, { useEffect, useState } from "react";
import { Dispatch } from "redux";
interface VideoCallNav {
  handleEndCall: () => void;
  callUser: string | null;
  room: string | undefined;
  isMuted: boolean;
  setIsMuted: React.Dispatch<React.SetStateAction<boolean>>;
}
export default function VideoCallNav({ handleEndCall, callUser, room, isMuted, setIsMuted }: VideoCallNav) {
  const endCall = () => {
    socket.emit("closeCall", { to: callUser, from: room });
    handleEndCall();
  };

  return (
    // microphone
    <div className="w-screen px-10 justify-between bg-gray-700 py-8 mx-auto my-2 flex">
      <button
        onClick={() => {
          setIsMuted(!isMuted);
        }}
        style={{ backgroundColor: " rgba(0, 0, 0, 0.5)" }}
        className="rounded-full px-2 py-2"
      >
        {isMuted ? (
          <svg fill="white" width="26" height="26" viewBox="0 0 34 40" xmlns="http://www.w3.org/2000/svg">
            <path d="M30,17h-2c0,1.8-0.5,3.5-1.4,5l1.5,1.5C29.3,21.5,29.9,19.3,30,17z"></path>
            <path d="M25,17V9c0-3.9-3.2-7-7.1-6.9c-2.9,0-5.6,1.9-6.5,4.7l13,13C24.8,18.9,25,17.9,25,17z"></path>
            <path
              d="M25.2,26.6l6.9,6.9l1.4-1.4L4,2.6L2.6,4l8.4,8.4V17c0,3.9,3.1,7,7,7c1.3,0,2.5-0.3,3.6-1l2.2,2.2C22.1,26.4,20.1,27,18,27
		c-5.4,0.2-9.8-4.1-10-9.4c0-0.2,0-0.4,0-0.6H6c0.1,6.2,4.8,11.4,11,12v3h-3c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1
		s-0.4-1-1-1h-3v-3C21.2,28.8,23.4,28,25.2,26.6z"
            ></path>
          </svg>
        ) : (
          <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M13.3001 3.95166C12.2746 3.95166 11.291 4.35906 10.5659 5.08422C9.84069 5.80939 9.4333 6.79293 9.4333 7.81847V13.232C9.4333 14.2576 9.84069 15.2411 10.5659 15.9663C11.291 16.6914 12.2746 17.0988 13.3001 17.0988C14.3257 17.0988 15.3092 16.6914 16.0344 15.9663C16.7595 15.2411 17.1669 14.2576 17.1669 13.232V7.81847C17.1669 6.79293 16.7595 5.80939 16.0344 5.08422C15.3092 4.35906 14.3257 3.95166 13.3001 3.95166ZM7.11321 12.4587C7.31832 12.4587 7.51502 12.5401 7.66006 12.6852C7.80509 12.8302 7.88657 13.0269 7.88657 13.232C7.88657 14.6678 8.45692 16.0447 9.47216 17.06C10.4874 18.0752 11.8643 18.6456 13.3001 18.6456C14.7359 18.6456 16.1128 18.0752 17.1281 17.06C18.1433 16.0447 18.7136 14.6678 18.7136 13.232C18.7136 13.0269 18.7951 12.8302 18.9402 12.6852C19.0852 12.5401 19.2819 12.4587 19.487 12.4587C19.6921 12.4587 19.8888 12.5401 20.0339 12.6852C20.1789 12.8302 20.2604 13.0269 20.2604 13.232C20.2607 14.9443 19.6298 16.5966 18.4884 17.873C17.347 19.1494 15.7752 19.9603 14.0735 20.1505V21.739C14.0735 21.9441 13.992 22.1408 13.847 22.2859C13.7019 22.4309 13.5052 22.5124 13.3001 22.5124C13.095 22.5124 12.8983 22.4309 12.7533 22.2859C12.6082 22.1408 12.5267 21.9441 12.5267 21.739V20.1505C10.8251 19.9603 9.2532 19.1494 8.11179 17.873C6.97038 16.5966 6.33952 14.9443 6.33984 13.232C6.33984 13.0269 6.42132 12.8302 6.56636 12.6852C6.71139 12.5401 6.9081 12.4587 7.11321 12.4587Z"
              fill="white"
            />
          </svg>
        )}
      </button>
      {/* videoBtn */}
      <button style={{ backgroundColor: " rgba(0, 0, 0, 0.5)" }} className="rounded-full px-3 py-2">
        <svg width="17" height="14" viewBox="0 0 17 14" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M1.45789 13.4509C1.12276 13.4509 0.829529 13.3252 0.578186 13.0738C0.326843 12.8225 0.201172 12.5293 0.201172 12.1941V1.30261C0.201172 0.967489 0.326843 0.674256 0.578186 0.422913C0.829529 0.17157 1.12276 0.0458984 1.45789 0.0458984H12.3494C12.6845 0.0458984 12.9778 0.17157 13.2291 0.422913C13.4805 0.674256 13.6061 0.967489 13.6061 1.30261V5.80584L16.9574 2.4546V11.0422L13.6061 7.69091V12.1941C13.6061 12.5293 13.4805 12.8225 13.2291 13.0738C12.9778 13.3252 12.6845 13.4509 12.3494 13.4509H1.45789Z"
            fill="white"
          />
        </svg>
      </button>
      {/* endCall btn  */}
      <button onClick={endCall} className="px-3 py-0.5 rounded-lg bg-red-600">
        <svg width="30px" height="30px" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M2.10863 14.1079L3.76461 15.7639C4.02858 16.0413 4.38552 16.2119 4.76752 16.2431C5.84479 16.3311 7.91395 15.0073 8.44327 14.1917C8.8559 13.5559 8.69631 12.6629 8.69702 11.9465C10.8675 11.3476 13.1582 11.3453 15.3275 11.9399C15.3268 12.6563 15.1654 13.5497 15.5768 14.1847C16.1037 14.9979 18.1615 16.3114 19.2367 16.2294C19.6149 16.2006 19.97 16.0352 20.2357 15.7642L21.895 14.1049C22.5266 13.4721 22.4856 12.3791 21.7923 11.8009C16.3175 6.31749 7.7222 6.27776 2.21038 11.7982C1.51362 12.3797 1.47304 13.4775 2.10863 14.1079Z"
            stroke="white"
            strokeLinejoin="round"
            strokeLinecap="round"
            strokeWidth="1.5"
          />
        </svg>
      </button>
      {/* speaker  */}
      <button style={{ backgroundColor: " rgba(0, 0, 0, 0.5)" }} className="rounded-full px-2 py-2">
        <svg width="29" height="29" viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M15.7984 7.28497C15.7982 7.12003 15.7514 6.9585 15.6635 6.81895C15.5756 6.6794 15.45 6.56749 15.3014 6.49608C15.1527 6.42467 14.9869 6.39666 14.823 6.41526C14.6591 6.43387 14.5038 6.49834 14.3749 6.60126L10.2323 9.91463H6.15634C5.92386 9.91463 5.70091 10.007 5.53652 10.1714C5.37214 10.3358 5.27979 10.5587 5.27979 10.7912V17.8036C5.27979 18.0361 5.37214 18.259 5.53652 18.4234C5.70091 18.5878 5.92386 18.6802 6.15634 18.6802H10.2323L14.3749 21.9935C14.5038 22.0964 14.6591 22.1609 14.823 22.1795C14.9869 22.1981 15.1527 22.1701 15.3014 22.0987C15.45 22.0273 15.5756 21.9154 15.6635 21.7758C15.7514 21.6363 15.7982 21.4748 15.7984 21.3098V7.28497ZM21.1016 14.2974C21.1029 15.3336 20.8995 16.3598 20.5029 17.3172C20.1064 18.2745 19.5246 19.144 18.791 19.8758L17.5515 18.6363C18.1221 18.0671 18.5746 17.3908 18.883 16.6462C19.1914 15.9016 19.3496 15.1033 19.3485 14.2974C19.3495 13.4915 19.1912 12.6933 18.8829 11.9486C18.5745 11.204 18.1221 10.5277 17.5515 9.95846L18.791 8.71901C19.5246 9.45077 20.1064 10.3203 20.5029 11.2776C20.8995 12.2349 21.1029 13.2612 21.1016 14.2974Z"
            fill="white"
          />
        </svg>
      </button>
      {/* more options  */}
      <button style={{ backgroundColor: " rgba(0, 0, 0, 0.5)" }} className="rounded-full px-2 py-2">
        <svg width="25" height="7" viewBox="0 0 25 7" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="4.04695" cy="3.46883" r="3.14022" fill="white" />
          <circle cx="12.8404" cy="3.46883" r="3.14022" fill="white" />
          <circle cx="21.6324" cy="3.46883" r="3.14022" fill="white" />
        </svg>
      </button>
    </div>
  );
}
